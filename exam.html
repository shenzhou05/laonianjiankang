<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>体检数据</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/hui.css" />
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<script src="js/jquery-2.1.1.min.js"></script>
		<script src="js/Chart.bundle.js"></script>
		<script src="js/utils.js"></script>
		<style type="text/css">
			body,
			html {
				margin: 0;
				padding: 0;
				height: 100%;
				background-color: #158dd2;
			}
			
			.checkbox-wrap {
				width: 100%;
				position: relative;
				margin: 0 auto;
				top: 30%;
				height: 40%;
				background-color: white;
			}
			
			input[type="checkbox"] {
				display: none;
			}
			
			input[type="checkbox"]+label {
				display: inline-block;
				width: 48%;
				margin-top: 10px;
				margin-left: 5px;
				text-align: left;
				-webkit-box-sizing: border-box;
			}
			
			label::before {
				content: "";
				display: inline-block;
				width: 30px;
				height: 30px;
				background: #EEE;
				vertical-align: middle;
				-webkit-border-radius: 50%;
				margin-right: 5px;
				-webkit-box-sizing: border-box;
				-webkit-transition: background ease-in .5s
			}
			
			input[type="checkbox"]:checked+label::before {
				background-color: rgb(203, 58, 58);
				border: 5px #EEEEEE solid;
			}
			
			.whitebackground {
				background-color: #fff;
				margin: 5px;
				border: 1px solid #595959;
				margin-top: 10px;
				padding: 5px;
				display: flex;
				border-radius: 8px;
				justify-content: space-between;
				flex-wrap: wrap;
				align-items: center;
			}
		</style>

	</head>

	<body>
		<div style="float:left;height:100%;width: 13%;">
			<div style="width:98%;">
				<a style="text-decoration: none;" href="index.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-clone" id="btn1">&nbsp;主页</button></a>
				<a style="text-decoration: none;" href="news.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-news" id="btn2">&nbsp;知识</button></a>
				<a style="text-decoration: none;" href="search_symptom.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-search" id="btn3">&nbsp;症状</button></a>
				<a style="text-decoration: none;" href="disease_seach.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-progress" id="btn7">&nbsp;疾病</button></a>
				<a style="text-decoration: none;" href="fuyao.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-check" id="btn4">&nbsp;服药</button></a>
				<a style="text-decoration: none;" href="personal.html"><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-my" id="btn5">&nbsp;我的</button></a>
				<a style="text-decoration: none;" href=""><button style="margin-top:2px;height: 40px;background-color: #00a2ff; color: #fff;" type="button" class="hui-button hui-button-large hui-footer-icons hui-icons-like" id="btn6">&nbsp;体检</button></a>
			</div>
		</div>

		<div style="float:left;height:100%;width: 87%;background-color:#fff ;">
			<div style="height:10%;background-color:#00c6ff ;">
				<div style="height: 100%;width: 10%;float: left;">
					<center>
						<div style="color: #fff;align-self: center;font-size: larger;margin-top: 8px;">健康老年</div>
					</center>
				</div>

				<div style="height: 100%;width: 15%;float: right;background-color: #CD0A0A;">
					<center>
						<div id="yijianhujiu" style="color: #fff;align-self: center;font-size: larger;margin-top: 8px;"><span class="glyphicon glyphicon-earphone" style="color: #fff;"></span> 一键呼救</div>
					</center>
				</div>

			</div>
			<div style="background:#F4F5F6;height:90%;overflow:scroll;">
				<!--这里面是主要界面-->
				<div class="hui-wrap">
					<div class="whitebackground" style="height: 60px;">
						<h3 style="margin: 0px;">体检数据</h3>
						<button type="button" style="height: 70%;border:1px solid #595959;" class="hui-button hui-footer-icons hui-icons-edit" onclick="openpage()">添加体检表</button>
					</div>
					<hr style="background-color: #000000;" />

					<div class="whitebackground" style="width:98.5%;">
						<canvas id="canvas1"></canvas>
						<div style='flex-basis: 100%;display: flex;justify-content: center;'>
							<div style="display: flex;flex-basis: 80%;justify-content: space-between;align-items: center;">
								<span id='avg1' style="font-size: 15px;">总高血压平均值：0.00 总低血压平均值：0.00</span>
								<button type="button" id="addData1" class="hui-button hui-primary hui-fl" style="width: 30%;">切换为30天数据</button>
							</div>
						</div>
					</div>
					<div class="whitebackground" style="width:98.5%;">
						<canvas id="canvas2"></canvas>
						<div style='flex-basis: 100%;display: flex;justify-content: center;'>
							<div style="display: flex;flex-basis: 80%;justify-content: space-between;align-items: center;">
								<span id='avg2' style="font-size: 20px;">总心跳平均值：0.00</span>
								<button type="button" id="addData2" class="hui-button hui-primary hui-fl" style="width: 30%;">切换为30天数据</button>
							</div>
						</div>
					</div>

					<div class="whitebackground" style="width:98.5%;">
						<canvas id="canvas3"></canvas>
						<div style='flex-basis: 100%;display: flex;justify-content: center;'>
							<div style="display: flex;flex-basis: 80%;justify-content: space-between;align-items: center;">
								<span id='avg3' style="font-size: 20px;">总血糖平均值：0.00</span>
								<button type="button" id="addData3" class="hui-button hui-primary hui-fl" style="width: 30%;">切换为30天数据</button>
							</div>
						</div>
					</div>
					<div class="whitebackground" style="width:98.5%;">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>时间</th>
									<th>血糖</th>
									<th>心跳</th>
									<th>高压</th>
									<th>低压</th>
									<th>状态</th>
								</tr>
							</thead>
							<tbody id="list">
							</tbody>
							<tr id="avg">
								<td style="background-color: #bbe6f3;">平均值</td>
								<td id="xuetangavg" style="background-color: #bbe6f3;">0.00</td>
								<td id="xintiaoavg" style="background-color: #bbe6f3;">0.0</td>
								<td id="gaoxueyaavg" style="background-color: #bbe6f3;">0.0</td>
								<td id="dixueyaavg" style="background-color: #bbe6f3;">0.0</td>
								<td style="background-color: #bbe6f3;">无</td>
							</tr>
						</table>
						<div style="display: flex;justify-content: center;flex-basis:100%">
							<ul class="pagination">
								<li>
									<a id="down">&laquo;</a>
								</li>
								<li>
									<a id="day1">1970-1-1</a>
								</li>
								<li>
									<a id="day2">1970-1-2</a>
								</li>
								<li>
									<a id="day3">1970-1-3</a>
								</li>
								<li>
									<a id="day4">1970-1-4</a>
								</li>
								<li class="active">
									<a id="day5">1970-1-5</a>
								</li>
								<li>
									<a id="up">&raquo;</a>
								</li>
							</ul>
						</div>
					</div>

					<div class="whitebackground" style="width:98.5%;">
						<div style='flex-basis: 100%;display: flex;justify-content: center;'>
							<div style="display: flex;flex-basis: 95%;justify-content: flex-start;align-items: center;">
								<button type="button" onclick="javascript:$('.allData').show();" class="hui-button hui-primary hui-fl" style="width: 20%;">显示全部数据</button>
								<button type="button" onclick="javascript:$('.allData').hide();" class="hui-button hui-primary hui-fl" style="width: 20%;">折叠全部数据</button>
							</div>
						</div>
						<div class='allData' style='flex-basis: 100%;display: none;flex;height:1px;background-color:#777;justify-content: center;margin: 10px 0px;'></div>
						<table class="table table-striped allData" style="display: none;">
							<thead>
								<tr>
									<th>日期</th>
									<th>时间</th>
									<th>血糖</th>
									<th>心跳</th>
									<th>高压</th>
									<th>低压</th>
									<th>状态</th>
									<th>修改/删除</th>
								</tr>
							</thead>
							<tbody id="alldata">
							</tbody>
						</table>
					</div>

				</div>
			</div>

		</div>

		<script type="text/javascript" src="js/hui.js" charset="UTF-8"></script>
		<script src="js/hui-swipe.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/hui-water-fall.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/hui-refresh-load-more.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/getscript?v=2.0&ak=thgDCOh7o3yI3xxQG8YmGi8toA9GCjhk"></script>
		<script src="js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript">
			$("#up").click(function() {
				move(1);
				showdata();
			});
			$("#down").click(function() {
				move(-1);
				showdata();
			});
			$("#day1").click(function() {
				$("li.active").removeClass("active");
				$("a[id='day1']").parent().addClass("active");
				point = 0;
				showdata();
			});
			$("#day2").click(function() {
				$("li.active").removeClass("active");
				$("a[id='day2']").parent().addClass("active");
				point = 1;
				showdata();
			});
			$("#day3").click(function() {
				$("li.active").removeClass("active");
				$("a[id='day3']").parent().addClass("active");
				point = 2;
				showdata();
			});
			$("#day4").click(function() {
				$("li.active").removeClass("active");
				$("a[id='day4']").parent().addClass("active");
				point = 3;
				showdata();
			});
			$("#day5").click(function() {
				$("li.active").removeClass("active");
				$("a[id='day5']").parent().addClass("active");
				point = 4;
				showdata();
			});

			function showdata() {
				var userid = plus.storage.getItem('userid');
				var url = "http://120.25.67.15/getPEs";
				var user_id = {
					Huser_id: userid
				};
				$.post(url, user_id, function(text) {
					var obj = JSON.parse(text);
					var temparry = [];
					for(var k = 0; k < obj.length; k++) {
						var str = (obj[k].Hrecording_date.split(" "))[0];
						str = parseInt((str.split("-"))[0]) + '-' + parseInt((str.split("-"))[1]) + '-' + parseInt((str.split("-"))[2]);
						obj[k].Hrecording_date = str;
						if(str == daylist[point]) {
							temparry.push(obj[k]);
						}
					}
					var compare = function(v1, v2) { //比较函数,从小到大
						var x = parseInt(v1.Hrecording_time);
						var y = parseInt(v2.Hrecording_time);
						if(x < y) {
							return -1;
						} else if(x == y) {
							return 0;
						} else {
							return 1;
						}
					}
					temparry.sort(compare);

					var alldata = $("#list");
					$(alldata).html("");

					var xueall = 0;
					var xinall = 0;
					var gaoall = 0;
					var diall = 0;

					for(var i = 0; i < temparry.length; i++) {
						xueall += parseFloat(temparry[i].Hblood_sugar);
						xinall += parseInt(temparry[i].Heart_rate);
						gaoall += parseFloat(temparry[i].Hsystolic_pressure);
						diall += parseFloat(temparry[i].Hdiastolic_pressure);

						var res = CheckData(parseFloat(temparry[i].Hblood_sugar), parseInt(temparry[i].Heart_rate), parseFloat(temparry[i].Hsystolic_pressure), parseFloat(temparry[i].Hdiastolic_pressure), parseInt(temparry[i].Hrecording_time));
						var resobj = res.split('，');

						switch(temparry[i].Hrecording_time.toString()) {
							case '0':
								temparry[i].Hrecording_time = '清晨';
								break;
							case '1':
								temparry[i].Hrecording_time = '早餐前';
								break;
							case '2':
								temparry[i].Hrecording_time = '早餐后';
								break;
							case '3':
								temparry[i].Hrecording_time = '中餐前';
								break;
							case '4':
								temparry[i].Hrecording_time = '中餐后';
								break;
							case '5':
								temparry[i].Hrecording_time = '晚餐前';
								break;
							case '6':
								temparry[i].Hrecording_time = '晚餐后';
								break;
							case '7':
								temparry[i].Hrecording_time = '睡前';
								break;
							default:
								temparry[i].Hrecording_time = '未知';
								break;
						}

						$(alldata).append(
							'<tr>\
							<td>' + temparry[i].Hrecording_time + '</td>\
							<td id="lsugar' + i + '">' + temparry[i].Hblood_sugar + '</td>\
							<td id="lheart' + i + '">' + parseInt(temparry[i].Heart_rate) + '</td>\
							<td id="lhigh' + i + '">' + temparry[i].Hsystolic_pressure + '</td>\
							<td id="llow' + i + '">' + temparry[i].Hdiastolic_pressure + '</td>\
							<td id="lnormal' + i + '" style="color: green;">正常</td>\
						</tr>');

						if(res != '') {
							$("#lnormal" + i).css("color", "#F00000");
							$("#lnormal" + i).html("不正常");
						}
						for(var j = 0; j < resobj.length; j++) {
							if(resobj[j] == "心跳") {
								$("#lheart" + i).css("color", "red");
							} else if(resobj[j] == "低压") {
								$("#llow" + i).css("color", "red");
							} else if(resobj[j] == "高压") {
								$("#lhigh" + i).css("color", "red");
							} else if(resobj[j] == "血糖") {
								$("#lsugar" + i).css("color", "red");
							}
						}

					}
					if(temparry.length != 0) {
						$("#xuetangavg").html(parseFloat(xueall / temparry.length).toFixed(2));
						$("#xintiaoavg").html(parseFloat(xinall / temparry.length).toFixed(1));
						$("#gaoxueyaavg").html(parseFloat(gaoall / temparry.length).toFixed(1));
						$("#dixueyaavg").html(parseFloat(diall / temparry.length).toFixed(1));
					} else {
						$("#xuetangavg").html("0.00");
						$("#xintiaoavg").html("0.0");
						$("#gaoxueyaavg").html("0.0");
						$("#dixueyaavg").html("0.0");
					}
				}).error(function() {
					hui.toast('响应错误!');
				});
			}

			var point = 4;
			var daylist = ['', '', '', '', ''];
			var nowDate2 = new Date();
			var nowDate3 = new Date(nowDate2.getTime() - 86400000 * 4);

			function move(direct) {
				if(direct > 0) {
					if($("li.active a").attr("id") == "day5") {
						var myDate = new Date(nowDate2.getTime() + 86400000);
						nowDate2 = myDate;
						nowDate3 = new Date(nowDate2.getTime() - 86400000 * 4);
						var myDateStr = myDate.getFullYear() + '-' + (parseInt(myDate.getMonth()) + 1) + '-' + myDate.getDate();
						getdaylist(myDateStr);
						UpDateDays();
						point = 4;
					} else {
						var daynum = parseInt($("li.active a").attr("id").replace("day", ""));
						$("li.active").removeClass("active");
						$("a[id='day" + (daynum + 1) + "']").parent().addClass("active");
						point++;
					}
				} else {
					if($("li.active a").attr("id") == "day1") {
						var myDate = new Date(nowDate3.getTime() - 86400000);
						nowDate3 = myDate;
						nowDate2 = new Date(nowDate3.getTime() + 86400000 * 4);
						var myDateStr = myDate.getFullYear() + '-' + (parseInt(myDate.getMonth()) + 1) + '-' + myDate.getDate();
						getdaylist2(myDateStr);
						UpDateDays();
						point = 0;
					} else {
						var daynum = parseInt($("li.active a").attr("id").replace("day", ""));
						$("li.active").removeClass("active");
						$("a[id='day" + (daynum - 1) + "']").parent().addClass("active");
						point--;
					}
				}
			}

			function UpDateDays() {
				$("#day1").html(daylist[0]);
				$("#day2").html(daylist[1]);
				$("#day3").html(daylist[2]);
				$("#day4").html(daylist[3]);
				$("#day5").html(daylist[4]);
			}

			function getdaylist(nowdate_str) {
				var year = parseInt((nowdate_str.split("-"))[0]);
				var month = parseInt((nowdate_str.split("-"))[1]) - 1;
				var day = parseInt((nowdate_str.split("-"))[2]);
				var nowDate1 = new Date();
				nowDate1.setFullYear(year, month, day);
				for(var i = 4; i >= 0; i--) {
					var myDate = new Date(nowDate1.getTime() - 86400000 * (4 - i));
					daylist[i] = myDate.getFullYear() + '-' + (parseInt(myDate.getMonth()) + 1) + '-' + myDate.getDate();
				}
			}

			function getdaylist2(nowdate_str) {
				var year = parseInt((nowdate_str.split("-"))[0]);
				var month = parseInt((nowdate_str.split("-"))[1]) - 1;
				var day = parseInt((nowdate_str.split("-"))[2]);
				var nowDate1 = new Date();
				nowDate1.setFullYear(year, month, day);
				for(var i = 0; i < 5; i++) {
					var myDate = new Date(nowDate1.getTime() + 86400000 * i);
					daylist[i] = myDate.getFullYear() + '-' + (parseInt(myDate.getMonth()) + 1) + '-' + myDate.getDate();
				}
			}

			function delet(obj) {
				var hid = {
					Hid: $(obj).attr("id").replace('hid', '')
				};
				var url = "http://120.25.67.15/deletePE";
				$.post(url, hid, function(text) {});
				hui.toast("数据已删除!");
				location.reload();
			}

			function modify(obj) {
				var hid = $(obj).parent().find("button[id]").attr('id');
				hid = hid.replace("hid", "");
				var sugar = $($(obj).parent().parent().parent().children("td").get(2)).html();
				var heart = $($(obj).parent().parent().parent().children("td").get(3)).html();
				var high = $($(obj).parent().parent().parent().children("td").get(4)).html();
				var low = $($(obj).parent().parent().parent().children("td").get(5)).html();
				var time = $($(obj).parent().parent().parent().children("td").get(1)).html();
				var date = $($(obj).parent().parent().parent().children("td").get(0)).html();

				switch(time) {
					case '清晨':
						time = '0';
						break;
					case '早餐前':
						time = '1';
						break;
					case '早餐后':
						time = '2';
						break;
					case '中餐前':
						time = '3';
						break;
					case '中餐后':
						time = '4';
						break;
					case '晚餐前':
						time = '5';
						break;
					case '晚餐后':
						time = '6';
						break;
					case '睡前':
						time = '7';
						break;
					default:
						time = '8';
						break;
				}

				var strr = (date.split("-")[0] + "");
				if((date.split("-")[1] + "").length < 2)
					strr += "-0" + (date.split("-")[1] + "");
				else
					strr += "-" + (date.split("-")[1] + "");
				if((date.split("-")[2] + "").length < 2)
					strr += "-0" + (date.split("-")[2] + "");
				else
					strr += "-" + (date.split("-")[2] + "");
				date = strr;
				//console.log('modify_exam.html' + "?hid=" + hid + "&sugar=" + sugar + "&heart=" + heart + "&high=" + high + "&low=" + low + "&time=" + time + "&date=" + date);
				window.open('modify_exam.html' + "?hid=" + hid + "&sugar=" + sugar + "&heart=" + heart + "&high=" + high + "&low=" + low + "&time=" + time + "&date=" + date);
			}

			function openpage() {
				window.open('add_exam.html');
			}

			var nowDate = new Date();
			var MONTHS = [];
			for(var i = 29; i >= 0; i--) {
				var myDate = new Date(nowDate.getTime() - 86400000 * (29 - i));
				MONTHS[i] = myDate.getFullYear() + '-' + (parseInt(myDate.getMonth()) + 1) + '-' + myDate.getDate();
			}
			var LABELS = MONTHS.slice(23);

			//var MONTHS = ["2017-12-12", "2017-12-13", "2017-12-14", "2017-12-15", "2017-12-16", "2017-12-17", "2017-12-18"];
			var config1 = {
				type: 'line',
				data: {
					labels: LABELS,
					datasets: [{
						label: "高压",
						backgroundColor: window.chartColors.red,
						borderColor: window.chartColors.red,
						data: [],
						fill: false,
					}, {
						label: "低压",
						fill: false,
						backgroundColor: window.chartColors.blue,
						borderColor: window.chartColors.blue,
						data: [],
					}]
				},
				options: {
					responsive: true,
					title: {
						display: true,
						text: '每日高低血压平均值'
					},
					tooltips: {
						mode: 'index',
						intersect: false,
					},
					hover: {
						mode: 'nearest',
						intersect: true
					},
					scales: {
						xAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '每天'
							}
						}],
						yAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '千帕'
							}
						}]
					}
				}
			};

			var config2 = {
				type: 'line',
				data: {
					labels: LABELS,
					datasets: [{
						label: "心跳",
						backgroundColor: window.chartColors.yellow,
						borderColor: window.chartColors.yellow,
						data: [],
						fill: false,
					}]
				},
				options: {
					responsive: true,
					title: {
						display: true,
						text: '每日心跳平均值'
					},
					tooltips: {
						mode: 'index',
						intersect: false,
					},
					hover: {
						mode: 'nearest',
						intersect: true
					},
					scales: {
						xAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '每天'
							}
						}],
						yAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '次数'
							}
						}]
					}
				}
			};

			var config3 = {
				type: 'line',
				data: {
					labels: LABELS,
					datasets: [{
						label: "血糖",
						backgroundColor: window.chartColors.purple,
						borderColor: window.chartColors.purple,
						data: [],
						fill: false,
					}]
				},
				options: {
					responsive: true,
					title: {
						display: true,
						text: '每日血糖平均值'
					},
					tooltips: {
						mode: 'index',
						intersect: false,
					},
					hover: {
						mode: 'nearest',
						intersect: true
					},
					scales: {
						xAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '每天'
							}
						}],
						yAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: '毫摩尔/升'
							}
						}]
					}
				}
			};

			var Chart1;
			var Chart2;
			var Chart3;
			window.onload = function() {
				var ctx1 = document.getElementById("canvas1").getContext("2d");
				Chart1 = new Chart(ctx1, config1);
				window.myLine = Chart1;
				var ctx2 = document.getElementById("canvas2").getContext("2d");
				Chart2 = new Chart(ctx2, config2);
				window.myLine = Chart2
				var ctx3 = document.getElementById("canvas3").getContext("2d");
				Chart3 = new Chart(ctx3, config3);
				window.myLine = Chart3;
			};

			//--------------------------------------------------------------------------------------------------------------------------------------------
			//--------------------------------------------------------------------------------------------------------------------------------------------

			var highh = 0;
			var loww = 0;
			var highh2 = 0;
			var loww2 = 0;
			var xinn = 0;
			var xinn2 = 0;
			var xuee = 0;
			var xuee2 = 0;

			var gaoxueyaEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天高血压每天的平均值
			var gaoxueyaEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天高血压每天的平均值
			var dixueyaEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天低血压每天的平均值
			var dixueyaEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天低血压每天的平均值
			var xintiaoEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天心跳每天的平均值
			var xintiaoEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天心跳每天的平均值
			var xuetangEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天血糖每天的平均值
			var xuetangEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天血糖每天的平均值
			function setgaoxueyapingjunzhi7(high, low) {
				highh += high;
				loww += low;
				$('#avg1').html('总高血压平均值：' + highh.toFixed(2) + ' 总低血压平均值：' + loww.toFixed(2));
			}

			function setgaoxueyapingjunzhi30(high, low) {
				highh2 += high;
				loww2 += low;
				$('#avg1').html('总高血压平均值：' + highh2.toFixed(2) + ' 总低血压平均值：' + loww2.toFixed(2));
			}

			function setxintiaopingjunzhi7(xin) {
				xinn += xin;
				$('#avg2').html('总心跳平均值：' + xinn.toFixed(2));
			}

			function setxintiaopingjunzhi30(xin) {
				xinn2 += xin;
				$('#avg2').html('总心跳平均值：' + xinn2.toFixed(2));
			}

			function setxuetangpingjunzhi7(xue) {
				xuee += xue;
				$('#avg3').html('总血糖平均值：' + xuee.toFixed(2));
			}

			function setxuetangpingjunzhi30(xue) {
				xuee2 += xue;
				$('#avg3').html('总血糖平均值：' + xuee2.toFixed(2));
			}

			function getXinTiao7() {
				var userid = plus.storage.getItem('userid');
				$('#addData2').html('切换为30天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "7",
					x: "Heart_rate",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var xinAvg = parseFloat(obj.Heart_rate);
					setxintiaopingjunzhi7(xinAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "7",
					x: "Heart_rate",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var xintiaoAll = [0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case LABELS[0] + " 00:00:00":
								xintiaoAll[0] = parseFloat(xintiaoAll[0]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case LABELS[1] + " 00:00:00":
								xintiaoAll[1] = parseFloat(xintiaoAll[1]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case LABELS[2] + " 00:00:00":
								xintiaoAll[2] = parseFloat(xintiaoAll[2]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case LABELS[3] + " 00:00:00":
								xintiaoAll[3] = parseFloat(xintiaoAll[3]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case LABELS[4] + " 00:00:00":
								xintiaoAll[4] = parseFloat(xintiaoAll[4]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case LABELS[5] + " 00:00:00":
								xintiaoAll[5] = parseFloat(xintiaoAll[5]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case LABELS[6] + " 00:00:00":
								xintiaoAll[6] = parseFloat(xintiaoAll[6]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[6] = cishu[6] + 1;
								break;
						}
					}
					for(var j = 0; j < 7; j++) {
						if(cishu[j] != 0)
							xintiaoAll[j] = (parseFloat(xintiaoAll[j] / cishu[j])).toFixed(2);
						//console.log(xintiaoAll[j]);
					}
					setXinEveryDayAvg7(xintiaoAll);
					XinTiaoEveryDayAvg7SetData();
				}).error(function() {
					hui.toast('无数据!');
				});
			}

			function getXinTiao30() {
				var userid = plus.storage.getItem('userid');
				$('#addData2').html('切换为7天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "30",
					x: "Heart_rate",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var xinAvg = parseFloat(obj.Heart_rate);
					setxintiaopingjunzhi30(xinAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "30",
					x: "Heart_rate",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var xintiaoAll = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case MONTHS[0] + " 00:00:00":
								xintiaoAll[0] = parseFloat(xintiaoAll[0]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case MONTHS[1] + " 00:00:00":
								xintiaoAll[1] = parseFloat(xintiaoAll[1]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case MONTHS[2] + " 00:00:00":
								xintiaoAll[2] = parseFloat(xintiaoAll[2]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case MONTHS[3] + " 00:00:00":
								xintiaoAll[3] = parseFloat(xintiaoAll[3]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case MONTHS[4] + " 00:00:00":
								xintiaoAll[4] = parseFloat(xintiaoAll[4]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case MONTHS[5] + " 00:00:00":
								xintiaoAll[5] = parseFloat(xintiaoAll[5]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case MONTHS[6] + " 00:00:00":
								xintiaoAll[6] = parseFloat(xintiaoAll[6]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[6] = cishu[6] + 1;
								break;
							case MONTHS[7] + " 00:00:00":
								xintiaoAll[7] = parseFloat(xintiaoAll[7]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[7] = cishu[7] + 1;
								break;
							case MONTHS[8] + " 00:00:00":
								xintiaoAll[8] = parseFloat(xintiaoAll[8]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[8] = cishu[8] + 1;
								break;
							case MONTHS[9] + " 00:00:00":
								xintiaoAll[9] = parseFloat(xintiaoAll[9]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[9] = cishu[9] + 1;
								break;
							case MONTHS[10] + " 00:00:00":
								xintiaoAll[10] = parseFloat(xintiaoAll[10]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[10] = cishu[10] + 1;
								break;
							case MONTHS[11] + " 00:00:00":
								xintiaoAll[11] = parseFloat(xintiaoAll[11]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[11] = cishu[11] + 1;
								break;
							case MONTHS[12] + " 00:00:00":
								xintiaoAll[12] = parseFloat(xintiaoAll[12]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[12] = cishu[12] + 1;
								break;
							case MONTHS[13] + " 00:00:00":
								xintiaoAll[13] = parseFloat(xintiaoAll[13]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[13] = cishu[13] + 1;
								break;
							case MONTHS[14] + " 00:00:00":
								xintiaoAll[14] = parseFloat(xintiaoAll[14]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[14] = cishu[14] + 1;
								break;
							case MONTHS[15] + " 00:00:00":
								xintiaoAll[15] = parseFloat(xintiaoAll[15]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[15] = cishu[15] + 1;
								break;
							case MONTHS[16] + " 00:00:00":
								xintiaoAll[16] = parseFloat(xintiaoAll[16]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[16] = cishu[16] + 1;
								break;
							case MONTHS[17] + " 00:00:00":
								xintiaoAll[17] = parseFloat(xintiaoAll[17]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[17] = cishu[17] + 1;
								break;
							case MONTHS[18] + " 00:00:00":
								xintiaoAll[18] = parseFloat(xintiaoAll[18]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[18] = cishu[18] + 1;
								break;
							case MONTHS[19] + " 00:00:00":
								xintiaoAll[19] = parseFloat(xintiaoAll[19]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[19] = cishu[19] + 1;
								break;
							case MONTHS[20] + " 00:00:00":
								xintiaoAll[20] = parseFloat(xintiaoAll[20]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[20] = cishu[20] + 1;
								break;
							case MONTHS[21] + " 00:00:00":
								xintiaoAll[21] = parseFloat(xintiaoAll[21]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[21] = cishu[21] + 1;
								break;
							case MONTHS[22] + " 00:00:00":
								xintiaoAll[22] = parseFloat(xintiaoAll[22]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[22] = cishu[22] + 1;
								break;
							case MONTHS[23] + " 00:00:00":
								xintiaoAll[23] = parseFloat(xintiaoAll[23]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[23] = cishu[23] + 1;
								break;
							case MONTHS[24] + " 00:00:00":
								xintiaoAll[24] = parseFloat(xintiaoAll[24]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[24] = cishu[24] + 1;
								break;
							case MONTHS[25] + " 00:00:00":
								xintiaoAll[25] = parseFloat(xintiaoAll[25]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[25] = cishu[25] + 1;
								break;
							case MONTHS[26] + " 00:00:00":
								xintiaoAll[26] = parseFloat(xintiaoAll[26]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[26] = cishu[26] + 1;
								break;
							case MONTHS[27] + " 00:00:00":
								xintiaoAll[27] = parseFloat(xintiaoAll[27]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[27] = cishu[27] + 1;
								break;
							case MONTHS[28] + " 00:00:00":
								xintiaoAll[28] = parseFloat(xintiaoAll[28]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[28] = cishu[28] + 1;
								break;
							case MONTHS[29] + " 00:00:00":
								xintiaoAll[29] = parseFloat(xintiaoAll[29]) + parseFloat(obj[i].Heart_rate);
								if(parseFloat(obj[i].Heart_rate) != 0)
									cishu[29] = cishu[29] + 1;
								break;
						}
					}
					for(var j = 0; j < 30; j++) {
						if(cishu[j] != 0)
							xintiaoAll[j] = (parseFloat(xintiaoAll[j] / cishu[j])).toFixed(2);
						//console.log(xintiaoAll[j]);
					}
					setXinEveryDayAvg30(xintiaoAll);
					XinTiaoEveryDayAvg30SetData();
				}).error(function() {
					hui.toast('无数据!');
				});
			}

			function getXueTang7() {
				var userid = plus.storage.getItem('userid');
				$('#addData3').html('切换为30天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "7",
					x: "Hblood_sugar",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var xueAvg = parseFloat(obj.Hblood_sugar);
					setxuetangpingjunzhi7(xueAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "7",
					x: "Hblood_sugar",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var xuetangAll = [0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case LABELS[0] + " 00:00:00":
								xuetangAll[0] = parseFloat(xuetangAll[0]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case LABELS[1] + " 00:00:00":
								xuetangAll[1] = parseFloat(xuetangAll[1]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case LABELS[2] + " 00:00:00":
								xuetangAll[2] = parseFloat(xuetangAll[2]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case LABELS[3] + " 00:00:00":
								xuetangAll[3] = parseFloat(xuetangAll[3]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case LABELS[4] + " 00:00:00":
								xuetangAll[4] = parseFloat(xuetangAll[4]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case LABELS[5] + " 00:00:00":
								xuetangAll[5] = parseFloat(xuetangAll[5]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case LABELS[6] + " 00:00:00":
								xuetangAll[6] = parseFloat(xuetangAll[6]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[6] = cishu[6] + 1;
								break;
						}
					}
					for(var j = 0; j < 7; j++) {
						if(cishu[j] != 0)
							xuetangAll[j] = (parseFloat(xuetangAll[j] / cishu[j])).toFixed(2);
						//console.log(xuetangAll[j]);
					}
					setXueEveryDayAvg7(xuetangAll);
					XueTangEveryDayAvg7SetData();
				}).error(function() {
					hui.toast('无数据!');
				});
			}

			function getXueTang30() {
				var userid = plus.storage.getItem('userid');
				$('#addData3').html('切换为7天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "30",
					x: "Hblood_sugar",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var xueAvg = parseFloat(obj.Hblood_sugar);
					setxuetangpingjunzhi30(xueAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "30",
					x: "Hblood_sugar",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var xuetangAll = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case MONTHS[0] + " 00:00:00":
								xuetangAll[0] = parseFloat(xuetangAll[0]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case MONTHS[1] + " 00:00:00":
								xuetangAll[1] = parseFloat(xuetangAll[1]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case MONTHS[2] + " 00:00:00":
								xuetangAll[2] = parseFloat(xuetangAll[2]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case MONTHS[3] + " 00:00:00":
								xuetangAll[3] = parseFloat(xuetangAll[3]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case MONTHS[4] + " 00:00:00":
								xuetangAll[4] = parseFloat(xuetangAll[4]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case MONTHS[5] + " 00:00:00":
								xuetangAll[5] = parseFloat(xuetangAll[5]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case MONTHS[6] + " 00:00:00":
								xuetangAll[6] = parseFloat(xuetangAll[6]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[6] = cishu[6] + 1;
								break;
							case MONTHS[7] + " 00:00:00":
								xuetangAll[7] = parseFloat(xuetangAll[7]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[7] = cishu[7] + 1;
								break;
							case MONTHS[8] + " 00:00:00":
								xuetangAll[8] = parseFloat(xuetangAll[8]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[8] = cishu[8] + 1;
								break;
							case MONTHS[9] + " 00:00:00":
								xuetangAll[9] = parseFloat(xuetangAll[9]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[9] = cishu[9] + 1;
								break;
							case MONTHS[10] + " 00:00:00":
								xuetangAll[10] = parseFloat(xuetangAll[10]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[10] = cishu[10] + 1;
								break;
							case MONTHS[11] + " 00:00:00":
								xuetangAll[11] = parseFloat(xuetangAll[11]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[11] = cishu[11] + 1;
								break;
							case MONTHS[12] + " 00:00:00":
								xuetangAll[12] = parseFloat(xuetangAll[12]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[12] = cishu[12] + 1;
								break;
							case MONTHS[13] + " 00:00:00":
								xuetangAll[13] = parseFloat(xuetangAll[13]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[13] = cishu[13] + 1;
								break;
							case MONTHS[14] + " 00:00:00":
								xuetangAll[14] = parseFloat(xuetangAll[14]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[14] = cishu[14] + 1;
								break;
							case MONTHS[15] + " 00:00:00":
								xuetangAll[15] = parseFloat(xuetangAll[15]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[15] = cishu[15] + 1;
								break;
							case MONTHS[16] + " 00:00:00":
								xuetangAll[16] = parseFloat(xuetangAll[16]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[16] = cishu[16] + 1;
								break;
							case MONTHS[17] + " 00:00:00":
								xuetangAll[17] = parseFloat(xuetangAll[17]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[17] = cishu[17] + 1;
								break;
							case MONTHS[18] + " 00:00:00":
								xuetangAll[18] = parseFloat(xuetangAll[18]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[18] = cishu[18] + 1;
								break;
							case MONTHS[19] + " 00:00:00":
								xuetangAll[19] = parseFloat(xuetangAll[19]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[19] = cishu[19] + 1;
								break;
							case MONTHS[20] + " 00:00:00":
								xuetangAll[20] = parseFloat(xuetangAll[20]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[20] = cishu[20] + 1;
								break;
							case MONTHS[21] + " 00:00:00":
								xuetangAll[21] = parseFloat(xuetangAll[21]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[21] = cishu[21] + 1;
								break;
							case MONTHS[22] + " 00:00:00":
								xuetangAll[22] = parseFloat(xuetangAll[22]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[22] = cishu[22] + 1;
								break;
							case MONTHS[23] + " 00:00:00":
								xuetangAll[23] = parseFloat(xuetangAll[23]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[23] = cishu[23] + 1;
								break;
							case MONTHS[24] + " 00:00:00":
								xuetangAll[24] = parseFloat(xuetangAll[24]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[24] = cishu[24] + 1;
								break;
							case MONTHS[25] + " 00:00:00":
								xuetangAll[25] = parseFloat(xuetangAll[25]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[25] = cishu[25] + 1;
								break;
							case MONTHS[26] + " 00:00:00":
								xuetangAll[26] = parseFloat(xuetangAll[26]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[26] = cishu[26] + 1;
								break;
							case MONTHS[27] + " 00:00:00":
								xuetangAll[27] = parseFloat(xuetangAll[27]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[27] = cishu[27] + 1;
								break;
							case MONTHS[28] + " 00:00:00":
								xuetangAll[28] = parseFloat(xuetangAll[28]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[28] = cishu[28] + 1;
								break;
							case MONTHS[29] + " 00:00:00":
								xuetangAll[29] = parseFloat(xuetangAll[29]) + parseFloat(obj[i].Hblood_sugar);
								if(parseFloat(obj[i].Hblood_sugar) != 0)
									cishu[29] = cishu[29] + 1;
								break;
						}
					}
					for(var j = 0; j < 30; j++) {
						if(cishu[j] != 0)
							xuetangAll[j] = (parseFloat(xuetangAll[j] / cishu[j])).toFixed(2);
						//console.log(xuetangAll[j]);
					}
					setXueEveryDayAvg30(xuetangAll);
					XueTangEveryDayAvg30SetData();
				}).error(function() {
					hui.toast('无数据!');
				});
			}

			function getXueYa7() {
				var userid = plus.storage.getItem('userid');
				$('#addData1').html('切换为30天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "7",
					x: "Hsystolic_pressure",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var gaoAvg = parseFloat(obj.Hsystolic_pressure);
					setgaoxueyapingjunzhi7(gaoAvg, 0);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url4 = "http://120.25.67.15/getAvgPEsBy";
				var tobj4 = {
					Huser_id: userid,
					n: "7",
					x: "Hdiastolic_pressure",
				};
				$.post(url4, tobj4, function(text) {
					var obj = JSON.parse(text);
					var diAvg = parseFloat(obj.Hdiastolic_pressure);
					setgaoxueyapingjunzhi7(0, diAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "7",
					x: "Hsystolic_pressure",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var gaoxueyaAll = [0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case LABELS[0] + " 00:00:00":
								gaoxueyaAll[0] = parseFloat(gaoxueyaAll[0]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case LABELS[1] + " 00:00:00":
								gaoxueyaAll[1] = parseFloat(gaoxueyaAll[1]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case LABELS[2] + " 00:00:00":
								gaoxueyaAll[2] = parseFloat(gaoxueyaAll[2]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case LABELS[3] + " 00:00:00":
								gaoxueyaAll[3] = parseFloat(gaoxueyaAll[3]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case LABELS[4] + " 00:00:00":
								gaoxueyaAll[4] = parseFloat(gaoxueyaAll[4]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case LABELS[5] + " 00:00:00":
								gaoxueyaAll[5] = parseFloat(gaoxueyaAll[5]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case LABELS[6] + " 00:00:00":
								gaoxueyaAll[6] = parseFloat(gaoxueyaAll[6]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[6] = cishu[6] + 1;
								break;
						}
					}
					for(var j = 0; j < 7; j++) {
						if(cishu[j] != 0)
							gaoxueyaAll[j] = (parseFloat(gaoxueyaAll[j] / cishu[j])).toFixed(2);
						//console.log(gaoxueyaAll[j]);
					}
					setGaoEveryDayAvg7(gaoxueyaAll);
					XueYaEveryDayAvg7SetData();
				}).error(function() {
					hui.toast('无数据!');
				});

				var url2 = "http://120.25.67.15/getPEsBy";
				var tobj2 = {
					Huser_id: userid,
					n: "30",
					x: "Hdiastolic_pressure",
				};
				$.post(url2, tobj2, function(text) {
					var obj = JSON.parse(text);
					var dixueyaAll = [0, 0, 0, 0, 0, 0, 0];
					var cishu2 = [0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case LABELS[0] + " 00:00:00":
								dixueyaAll[0] = parseFloat(dixueyaAll[0]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[0] = cishu2[0] + 1;
								break;
							case LABELS[1] + " 00:00:00":
								dixueyaAll[1] = parseFloat(dixueyaAll[1]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[1] = cishu2[1] + 1;
								break;
							case LABELS[2] + " 00:00:00":
								dixueyaAll[2] = parseFloat(dixueyaAll[2]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[2] = cishu2[2] + 1;
								break;
							case LABELS[3] + " 00:00:00":
								dixueyaAll[3] = parseFloat(dixueyaAll[3]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[3] = cishu2[3] + 1;
								break;
							case LABELS[4] + " 00:00:00":
								dixueyaAll[4] = parseFloat(dixueyaAll[4]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[4] = cishu2[4] + 1;
								break;
							case LABELS[5] + " 00:00:00":
								dixueyaAll[5] = parseFloat(dixueyaAll[5]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[5] = cishu2[5] + 1;
								break;
							case LABELS[6] + " 00:00:00":
								dixueyaAll[6] = parseFloat(dixueyaAll[6]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[6] = cishu2[6] + 1;
								break;
						}
					}

					for(var j = 0; j < 7; j++) {
						if(cishu2[j] != 0)
							dixueyaAll[j] = (parseFloat(dixueyaAll[j] / cishu2[j])).toFixed(2);
						//console.log(dixueyaAll[j]);
					}
					setDiEveryDayAvg7(dixueyaAll);
					XueYaEveryDayAvg7SetData();
				}).error(function() {
					hui.toast('无数据!');
				});

			}

			function getXueYa30() {
				var userid = plus.storage.getItem('userid');
				$('#addData1').html('切换为7天数据');

				var url3 = "http://120.25.67.15/getAvgPEsBy";
				var tobj3 = {
					Huser_id: userid,
					n: "30",
					x: "Hsystolic_pressure",
				};
				$.post(url3, tobj3, function(text) {
					var obj = JSON.parse(text);
					var gaoAvg = parseFloat(obj.Hsystolic_pressure);
					setgaoxueyapingjunzhi30(gaoAvg, 0);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url4 = "http://120.25.67.15/getAvgPEsBy";
				var tobj4 = {
					Huser_id: userid,
					n: "30",
					x: "Hdiastolic_pressure",
				};
				$.post(url4, tobj4, function(text) {
					var obj = JSON.parse(text);
					var diAvg = parseFloat(obj.Hdiastolic_pressure);
					setgaoxueyapingjunzhi30(0, diAvg);
				}).error(function() {
					hui.toast('无数据!');
				});

				var url = "http://120.25.67.15/getPEsBy";
				var tobj = {
					Huser_id: userid,
					n: "30",
					x: "Hsystolic_pressure",
				};
				$.post(url, tobj, function(text) {
					var obj = JSON.parse(text);
					var gaoxueyaAll = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					var cishu = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case MONTHS[0] + " 00:00:00":
								gaoxueyaAll[0] = parseFloat(gaoxueyaAll[0]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[0] = cishu[0] + 1;
								break;
							case MONTHS[1] + " 00:00:00":
								gaoxueyaAll[1] = parseFloat(gaoxueyaAll[1]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[1] = cishu[1] + 1;
								break;
							case MONTHS[2] + " 00:00:00":
								gaoxueyaAll[2] = parseFloat(gaoxueyaAll[2]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[2] = cishu[2] + 1;
								break;
							case MONTHS[3] + " 00:00:00":
								gaoxueyaAll[3] = parseFloat(gaoxueyaAll[3]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[3] = cishu[3] + 1;
								break;
							case MONTHS[4] + " 00:00:00":
								gaoxueyaAll[4] = parseFloat(gaoxueyaAll[4]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[4] = cishu[4] + 1;
								break;
							case MONTHS[5] + " 00:00:00":
								gaoxueyaAll[5] = parseFloat(gaoxueyaAll[5]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[5] = cishu[5] + 1;
								break;
							case MONTHS[6] + " 00:00:00":
								gaoxueyaAll[6] = parseFloat(gaoxueyaAll[6]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[6] = cishu[6] + 1;
								break;
							case MONTHS[7] + " 00:00:00":
								gaoxueyaAll[7] = parseFloat(gaoxueyaAll[7]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[7] = cishu[7] + 1;
								break;
							case MONTHS[8] + " 00:00:00":
								gaoxueyaAll[8] = parseFloat(gaoxueyaAll[8]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[8] = cishu[8] + 1;
								break;
							case MONTHS[9] + " 00:00:00":
								gaoxueyaAll[9] = parseFloat(gaoxueyaAll[9]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[9] = cishu[9] + 1;
								break;
							case MONTHS[10] + " 00:00:00":
								gaoxueyaAll[10] = parseFloat(gaoxueyaAll[10]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[10] = cishu[10] + 1;
								break;
							case MONTHS[11] + " 00:00:00":
								gaoxueyaAll[11] = parseFloat(gaoxueyaAll[11]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[11] = cishu[11] + 1;
								break;
							case MONTHS[12] + " 00:00:00":
								gaoxueyaAll[12] = parseFloat(gaoxueyaAll[12]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[12] = cishu[12] + 1;
								break;
							case MONTHS[13] + " 00:00:00":
								gaoxueyaAll[13] = parseFloat(gaoxueyaAll[13]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[13] = cishu[13] + 1;
								break;
							case MONTHS[14] + " 00:00:00":
								gaoxueyaAll[14] = parseFloat(gaoxueyaAll[14]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[14] = cishu[14] + 1;
								break;
							case MONTHS[15] + " 00:00:00":
								gaoxueyaAll[15] = parseFloat(gaoxueyaAll[15]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[15] = cishu[15] + 1;
								break;
							case MONTHS[16] + " 00:00:00":
								gaoxueyaAll[16] = parseFloat(gaoxueyaAll[16]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[16] = cishu[16] + 1;
								break;
							case MONTHS[17] + " 00:00:00":
								gaoxueyaAll[17] = parseFloat(gaoxueyaAll[17]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[17] = cishu[17] + 1;
								break;
							case MONTHS[18] + " 00:00:00":
								gaoxueyaAll[18] = parseFloat(gaoxueyaAll[18]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[18] = cishu[18] + 1;
								break;
							case MONTHS[19] + " 00:00:00":
								gaoxueyaAll[19] = parseFloat(gaoxueyaAll[19]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[19] = cishu[19] + 1;
								break;
							case MONTHS[20] + " 00:00:00":
								gaoxueyaAll[20] = parseFloat(gaoxueyaAll[20]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[20] = cishu[20] + 1;
								break;
							case MONTHS[21] + " 00:00:00":
								gaoxueyaAll[21] = parseFloat(gaoxueyaAll[21]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[21] = cishu[21] + 1;
								break;
							case MONTHS[22] + " 00:00:00":
								gaoxueyaAll[22] = parseFloat(gaoxueyaAll[22]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[22] = cishu[22] + 1;
								break;
							case MONTHS[23] + " 00:00:00":
								gaoxueyaAll[23] = parseFloat(gaoxueyaAll[23]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[23] = cishu[23] + 1;
								break;
							case MONTHS[24] + " 00:00:00":
								gaoxueyaAll[24] = parseFloat(gaoxueyaAll[24]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[24] = cishu[24] + 1;
								break;
							case MONTHS[25] + " 00:00:00":
								gaoxueyaAll[25] = parseFloat(gaoxueyaAll[25]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[25] = cishu[25] + 1;
								break;
							case MONTHS[26] + " 00:00:00":
								gaoxueyaAll[26] = parseFloat(gaoxueyaAll[26]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[26] = cishu[26] + 1;
								break;
							case MONTHS[27] + " 00:00:00":
								gaoxueyaAll[27] = parseFloat(gaoxueyaAll[27]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[27] = cishu[27] + 1;
								break;
							case MONTHS[28] + " 00:00:00":
								gaoxueyaAll[28] = parseFloat(gaoxueyaAll[28]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[28] = cishu[28] + 1;
								break;
							case MONTHS[29] + " 00:00:00":
								gaoxueyaAll[29] = parseFloat(gaoxueyaAll[29]) + parseFloat(obj[i].Hsystolic_pressure);
								if(parseFloat(obj[i].Hsystolic_pressure) != 0)
									cishu[29] = cishu[29] + 1;
								break;
						}
					}
					for(var j = 0; j < 30; j++) {
						if(cishu[j] != 0)
							gaoxueyaAll[j] = (parseFloat(gaoxueyaAll[j] / cishu[j])).toFixed(2);
						//console.log(gaoxueyaAll[j]);
					}
					setGaoEveryDayAvg30(gaoxueyaAll);
					XueYaEveryDayAvg30SetData();
				}).error(function() {
					hui.toast('无数据!');
				});

				var url2 = "http://120.25.67.15/getPEsBy";
				var tobj2 = {
					Huser_id: userid,
					n: "30",
					x: "Hdiastolic_pressure",
				};
				$.post(url2, tobj2, function(text) {
					var obj = JSON.parse(text);
					var dixueyaAll = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					var cishu2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
					for(var i = 0; i < obj.length; i++) {
						switch(obj[i].Hrecording_date) {
							case MONTHS[0] + " 00:00:00":
								dixueyaAll[0] = parseFloat(dixueyaAll[0]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[0] = cishu2[0] + 1;
								break;
							case MONTHS[1] + " 00:00:00":
								dixueyaAll[1] = parseFloat(dixueyaAll[1]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[1] = cishu2[1] + 1;
								break;
							case MONTHS[2] + " 00:00:00":
								dixueyaAll[2] = parseFloat(dixueyaAll[2]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[2] = cishu2[2] + 1;
								break;
							case MONTHS[3] + " 00:00:00":
								dixueyaAll[3] = parseFloat(dixueyaAll[3]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[3] = cishu2[3] + 1;
								break;
							case MONTHS[4] + " 00:00:00":
								dixueyaAll[4] = parseFloat(dixueyaAll[4]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[4] = cishu2[4] + 1;
								break;
							case MONTHS[5] + " 00:00:00":
								dixueyaAll[5] = parseFloat(dixueyaAll[5]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[5] = cishu2[5] + 1;
								break;
							case MONTHS[6] + " 00:00:00":
								dixueyaAll[6] = parseFloat(dixueyaAll[6]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[6] = cishu2[6] + 1;
								break;
							case MONTHS[7] + " 00:00:00":
								dixueyaAll[7] = parseFloat(dixueyaAll[7]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[7] = cishu2[7] + 1;
								break;
							case MONTHS[8] + " 00:00:00":
								dixueyaAll[8] = parseFloat(dixueyaAll[8]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[8] = cishu2[8] + 1;
								break;
							case MONTHS[9] + " 00:00:00":
								dixueyaAll[9] = parseFloat(dixueyaAll[9]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[9] = cishu2[9] + 1;
								break;
							case MONTHS[10] + " 00:00:00":
								dixueyaAll[10] = parseFloat(dixueyaAll[10]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[10] = cishu2[10] + 1;
								break;
							case MONTHS[11] + " 00:00:00":
								dixueyaAll[11] = parseFloat(dixueyaAll[11]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[11] = cishu2[11] + 1;
								break;
							case MONTHS[12] + " 00:00:00":
								dixueyaAll[12] = parseFloat(dixueyaAll[12]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[12] = cishu2[12] + 1;
								break;
							case MONTHS[13] + " 00:00:00":
								dixueyaAll[13] = parseFloat(dixueyaAll[13]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[13] = cishu2[13] + 1;
								break;
							case MONTHS[14] + " 00:00:00":
								dixueyaAll[14] = parseFloat(dixueyaAll[14]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[14] = cishu2[14] + 1;
								break;
							case MONTHS[15] + " 00:00:00":
								dixueyaAll[15] = parseFloat(dixueyaAll[15]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[15] = cishu2[15] + 1;
								break;
							case MONTHS[16] + " 00:00:00":
								dixueyaAll[16] = parseFloat(dixueyaAll[16]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[16] = cishu2[16] + 1;
								break;
							case MONTHS[17] + " 00:00:00":
								dixueyaAll[17] = parseFloat(dixueyaAll[17]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[17] = cishu2[17] + 1;
								break;
							case MONTHS[18] + " 00:00:00":
								dixueyaAll[18] = parseFloat(dixueyaAll[18]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[18] = cishu2[18] + 1;
								break;
							case MONTHS[19] + " 00:00:00":
								dixueyaAll[19] = parseFloat(dixueyaAll[19]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[19] = cishu2[19] + 1;
								break;
							case MONTHS[20] + " 00:00:00":
								dixueyaAll[20] = parseFloat(dixueyaAll[20]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[20] = cishu2[20] + 1;
								break;
							case MONTHS[21] + " 00:00:00":
								dixueyaAll[21] = parseFloat(dixueyaAll[21]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[21] = cishu2[21] + 1;
								break;
							case MONTHS[22] + " 00:00:00":
								dixueyaAll[22] = parseFloat(dixueyaAll[22]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[22] = cishu2[22] + 1;
								break;
							case MONTHS[23] + " 00:00:00":
								dixueyaAll[23] = parseFloat(dixueyaAll[23]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[23] = cishu2[23] + 1;
								break;
							case MONTHS[24] + " 00:00:00":
								dixueyaAll[24] = parseFloat(dixueyaAll[24]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[24] = cishu2[24] + 1;
								break;
							case MONTHS[25] + " 00:00:00":
								dixueyaAll[25] = parseFloat(dixueyaAll[25]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[25] = cishu2[25] + 1;
								break;
							case MONTHS[26] + " 00:00:00":
								dixueyaAll[26] = parseFloat(dixueyaAll[26]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[26] = cishu2[26] + 1;
								break;
							case MONTHS[27] + " 00:00:00":
								dixueyaAll[27] = parseFloat(dixueyaAll[27]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[27] = cishu2[27] + 1;
								break;
							case MONTHS[28] + " 00:00:00":
								dixueyaAll[28] = parseFloat(dixueyaAll[28]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[28] = cishu2[28] + 1;
								break;
							case MONTHS[29] + " 00:00:00":
								dixueyaAll[29] = parseFloat(dixueyaAll[29]) + parseFloat(obj[i].Hdiastolic_pressure);
								if(parseFloat(obj[i].Hdiastolic_pressure) != 0)
									cishu2[29] = cishu2[29] + 1;
								break;
						}
					}

					for(var j = 0; j < 30; j++) {
						if(cishu2[j] != 0)
							dixueyaAll[j] = (parseFloat(dixueyaAll[j] / cishu2[j])).toFixed(2);
						//console.log(dixueyaAll[j]);
					}
					setDiEveryDayAvg30(dixueyaAll);
					XueYaEveryDayAvg30SetData();
				}).error(function() {
					hui.toast('无数据!');
				});

			}

			function XueYaEveryDayAvg7SetData() {
				config1.data.labels = [];
				config1.data.datasets[0].data = [];
				config1.data.datasets[1].data = [];
				for(var i = 23; i <= 29; i++)
					if(config1.data.datasets.length > 0) {
						var month = MONTHS[i];
						config1.data.labels.push(month);

						config1.data.datasets.forEach(function(dataset) {
							if(dataset.label == "高压") {
								var gaotempobj = getGaoEveryDayAvg7();
								dataset.data.push(gaotempobj[i - 23]);
							} else {
								var ditempobj = getDiEveryDayAvg7();
								dataset.data.push(ditempobj[i - 23]);
							}
						});
						window.myLine = Chart1;
						window.myLine.update();
					}
			}

			function XueYaEveryDayAvg30SetData() {
				config1.data.labels = [];
				config1.data.datasets[0].data = [];
				config1.data.datasets[1].data = [];
				for(var i = 0; i < 30; i++)
					if(config1.data.datasets.length > 0) {
						var month = MONTHS[i];
						config1.data.labels.push(month);

						config1.data.datasets.forEach(function(dataset) {
							if(dataset.label == "高压") {
								var gaotempobj = getGaoEveryDayAvg30();
								dataset.data.push(gaotempobj[i]);
							} else {
								var ditempobj = getDiEveryDayAvg30();
								dataset.data.push(ditempobj[i]);
							}
						});
						window.myLine = Chart1;
						window.myLine.update();
					}
			}

			function XinTiaoEveryDayAvg7SetData() {
				config2.data.labels = [];
				config2.data.datasets[0].data = [];

				for(var i = 23; i <= 29; i++)
					if(config2.data.datasets.length > 0) {
						var month = MONTHS[i];
						config2.data.labels.push(month);

						config2.data.datasets.forEach(function(dataset) {
							if(dataset.label == "心跳") {
								var xintempobj = getXinEveryDayAvg7();
								dataset.data.push(xintempobj[i - 23]);
							}
						});
						window.myLine = Chart2;
						window.myLine.update();
					}
			}

			function XinTiaoEveryDayAvg30SetData() {
				config2.data.labels = [];
				config2.data.datasets[0].data = [];

				for(var i = 0; i < 30; i++)
					if(config2.data.datasets.length > 0) {
						var month = MONTHS[i];
						config2.data.labels.push(month);

						config2.data.datasets.forEach(function(dataset) {
							if(dataset.label == "心跳") {
								var xintempobj = getXinEveryDayAvg30();
								dataset.data.push(xintempobj[i]);
							}
						});
						window.myLine = Chart2;
						window.myLine.update();
					}
			}

			function XueTangEveryDayAvg7SetData() {
				config3.data.labels = [];
				config3.data.datasets[0].data = [];

				for(var i = 23; i <= 29; i++)
					if(config3.data.datasets.length > 0) {
						var month = MONTHS[i];
						config3.data.labels.push(month);

						config3.data.datasets.forEach(function(dataset) {
							if(dataset.label == "血糖") {
								var xuetempobj = getXueEveryDayAvg7();
								dataset.data.push(xuetempobj[i - 23]);
							}
						});
						window.myLine = Chart3;
						window.myLine.update();
					}
			}

			function XueTangEveryDayAvg30SetData() {
				config3.data.labels = [];
				config3.data.datasets[0].data = [];

				for(var i = 0; i < 30; i++)
					if(config3.data.datasets.length > 0) {
						var month = MONTHS[i];
						config3.data.labels.push(month);

						config3.data.datasets.forEach(function(dataset) {
							if(dataset.label == "血糖") {
								var xuetempobj = getXueEveryDayAvg30();
								dataset.data.push(xuetempobj[i]);
							}
						});
						window.myLine = Chart3;
						window.myLine.update();
					}
			}

			function setGaoEveryDayAvg7(obj) {
				gaoxueyaEveryDayAvg7 = obj;
			}

			function getGaoEveryDayAvg7() {
				return gaoxueyaEveryDayAvg7;
			}

			function setGaoEveryDayAvg30(obj) {
				gaoxueyaEveryDayAvg30 = obj;
			}

			function getGaoEveryDayAvg30() {
				return gaoxueyaEveryDayAvg30;
			}

			function setDiEveryDayAvg7(obj) {
				dixueyaEveryDayAvg7 = obj;
			}

			function getDiEveryDayAvg7() {
				return dixueyaEveryDayAvg7;
			}

			function setDiEveryDayAvg30(obj) {
				dixueyaEveryDayAvg30 = obj;
			}

			function getDiEveryDayAvg30() {
				return dixueyaEveryDayAvg30;
			}

			function setXinEveryDayAvg7(obj) {
				xintiaoEveryDayAvg7 = obj;
			}

			function getXinEveryDayAvg7() {
				return xintiaoEveryDayAvg7;
			}

			function setXinEveryDayAvg30(obj) {
				xintiaoEveryDayAvg30 = obj;
			}

			function getXinEveryDayAvg30() {
				return xintiaoEveryDayAvg30;
			}

			function setXueEveryDayAvg7(obj) {
				xuetangEveryDayAvg7 = obj;
			}

			function getXueEveryDayAvg7() {
				return xuetangEveryDayAvg7;
			}

			function setXueEveryDayAvg30(obj) {
				xuetangEveryDayAvg30 = obj;
			}

			function getXueEveryDayAvg30() {
				return xuetangEveryDayAvg30;
			}
			//--------------------------------------------------------------------------------------------------------------------------------------------
			//--------------------------------------------------------------------------------------------------------------------------------------------

			var addData1_7 = true;
			document.getElementById('addData1').addEventListener('click', function() {
				//重置
				highh = 0;
				highh2 = 0;
				loww = 0;
				loww2 = 0;

				gaoxueyaEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0];
				gaoxueyaEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
				dixueyaEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0];
				dixueyaEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

				if(addData1_7) {
					getXueYa30();
					addData1_7 = false;
				} else {
					getXueYa7();
					addData1_7 = true;
				}
			});

			var addData2_7 = true;
			document.getElementById('addData2').addEventListener('click', function() {
				//重置
				xinn = 0;
				xinn2 = 0;

				xintiaoEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天心跳每天的平均值
				xintiaoEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天心跳每天的平均值

				if(addData2_7) {
					getXinTiao30();
					addData2_7 = false;
				} else {
					getXinTiao7();
					addData2_7 = true;
				}
			});

			var addData3_7 = true;
			document.getElementById('addData3').addEventListener('click', function() {
				//重置
				xuee = 0;
				xuee2 = 0;

				xuetangEveryDayAvg7 = [0, 0, 0, 0, 0, 0, 0]; //七天血糖每天的平均值
				xuetangEveryDayAvg30 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //三十天血糖每天的平均值

				if(addData3_7) {
					getXueTang30();
					addData3_7 = false;
				} else {
					getXueTang7();
					addData3_7 = true;
				}
			});

			var haveUser = false;

			hui.plusReady(function() {
				haveUser = check_user();
				if(!haveUser) {
					hui.toast('请先登录!');
					window.open('login.html');
				} else //在内存中有user_id
				{
					main();
					daylist = ['', '', '', '', ''];
					getdaylist(LABELS[6]);
					UpDateDays();
					showdata();
				}
			});

			function CheckData(bloodSugar, heartBeat, pressureHigh, pressureLow, time) {
				var res = "";
				if(heartBeat < 60 || heartBeat > 100)
					res += "心跳，";
				if(pressureLow < 60 || pressureLow > 90)
					res += "低压，";
				if(pressureHigh < 100 || pressureHigh > 140)
					res += "高压，";
				switch(time) {
					case 0:
						if(bloodSugar < 2.0 || bloodSugar > 4.9)
							res += "血糖，";
						break;
					case 1:
						if(bloodSugar < 1.0 || bloodSugar > 4.9)
							res += "血糖，";
						break;
					case 2:
						if(bloodSugar < 8.0 || bloodSugar > 11.1)
							res += "血糖，";
						break;
					case 3:
						if(bloodSugar < 6.0 || bloodSugar > 9.0)
							res += "血糖，";
						break;
					case 4:
						if(bloodSugar < 8.0 || bloodSugar > 11.1)
							res += "血糖，";
						break;
					case 5:
						if(bloodSugar < 6.0 || bloodSugar > 9.0)
							res += "血糖，";
						break;
					case 6:
						if(bloodSugar < 8.0 || bloodSugar > 11.1)
							res += "血糖，";
						break;
					case 7:
						if(bloodSugar < 5.0 || bloodSugar > 9.0)
							res += "血糖，";
						break;
					default:
						if(bloodSugar < 5.0 || bloodSugar > 11.0)
							res += "血糖，";
						break;
				}
				res = res.substring(0, res.length - 1);
				//console.log(res);
				return res;
			}

			function main() {
				var userid = plus.storage.getItem('userid');
				var url = "http://120.25.67.15/getPEs";
				var user_id = {
					Huser_id: userid
				};
				getXueYa7();
				getXinTiao7();
				getXueTang7();

				$.post(url, user_id, function(text) {
					var obj = JSON.parse(text);
					var compare = function(v1, v2) { //比较函数,从小到大，date权重最大
						var temp1 = ((v1.Hrecording_date.toString()).split(' '))[0];
						temp1 = parseInt(temp1.replace("-", "").replace("-", ""));
						var temp2 = ((v2.Hrecording_date.toString()).split(' '))[0];
						temp2 = parseInt(temp2.replace("-", "").replace("-", ""));
						var x = parseInt(v1.Hrecording_time);
						var y = parseInt(v2.Hrecording_time);

						if(temp1 < temp2) {
							return -1;
						} else if(temp1 == temp2) {
							if(x < y) {
								return -1;
							} else if(x == y) {
								return 0;
							} else {
								return 1;
							}
						} else if(temp1 > temp2) {
							return 1;
						}
					}
					obj.sort(compare);
					var alldata = $("#alldata");
					//console.log(obj.length);
					if(obj.length == 0) {
						$(alldata).append(
							'<tr>\
							<td>无数据</td>\
							<td>无数据</td>\
							<td>无数据</td>\
							<td>无数据</td>\
							<td>无数据</td>\
							<td>无数据</td>\
							<td style="color: green;">无数据</td>\
							<td>\
								<div style="display: flex;justify-content: center;align-items: center;flex-wrap: nowrap;">\
								无数据\
								</div>\
							</td>\
						</tr>');
					} else {
						$(alldata).html("");
					}

					for(var i = 0; i < obj.length; i++) {
						var res = CheckData(parseFloat(obj[i].Hblood_sugar), parseInt(obj[i].Heart_rate), parseFloat(obj[i].Hsystolic_pressure), parseFloat(obj[i].Hdiastolic_pressure), parseInt(obj[i].Hrecording_time));
						var resobj = res.split('，');
						//console.log(parseInt(obj[i].Hrecording_time));
						obj[i].Hrecording_date = ((obj[i].Hrecording_date.toString()).split(' '))[0];
						switch(obj[i].Hrecording_time.toString()) {
							case '0':
								obj[i].Hrecording_time = '清晨';
								break;
							case '1':
								obj[i].Hrecording_time = '早餐前';
								break;
							case '2':
								obj[i].Hrecording_time = '早餐后';
								break;
							case '3':
								obj[i].Hrecording_time = '中餐前';
								break;
							case '4':
								obj[i].Hrecording_time = '中餐后';
								break;
							case '5':
								obj[i].Hrecording_time = '晚餐前';
								break;
							case '6':
								obj[i].Hrecording_time = '晚餐后';
								break;
							case '7':
								obj[i].Hrecording_time = '睡前';
								break;
							default:
								obj[i].Hrecording_time = '未知';
								break;
						}
						$(alldata).append(
							'<tr>\
							<td>' + obj[i].Hrecording_date + '</td>\
							<td>' + obj[i].Hrecording_time + '</td>\
							<td id="sugar' + i + '">' + obj[i].Hblood_sugar + '</td>\
							<td id="heart' + i + '">' + parseInt(obj[i].Heart_rate) + '</td>\
							<td id="high' + i + '">' + obj[i].Hsystolic_pressure + '</td>\
							<td id="low' + i + '">' + obj[i].Hdiastolic_pressure + '</td>\
							<td id="normal' + i + '" style="color: green;">正常</td>\
							<td>\
								<div style="display: flex;justify-content: center;align-items: center;flex-wrap: nowrap;">\
									<button type="button" onclick="modify(this)" class="hui-button hui-primary hui-fl" style="height:25px;width: 50%;vertical-align:middle ; line-height:5px;">修改</button>\
									<button type="button" id="hid' + obj[i].Hid + '" onclick="delet(this)" class="hui-button hui-primary hui-fl" style="height:25px;width: 50%;vertical-align:middle ; line-height:5px;">删除</button>\
								</div>\
							</td>\
						</tr>');

						if(res != '') {
							$("#normal" + i).css("color", "#F00000");
							$("#normal" + i).html("不正常");
						}
						for(var j = 0; j < resobj.length; j++) {
							if(resobj[j] == "心跳") {
								$("#heart" + i).css("color", "red");
							} else if(resobj[j] == "低压") {
								$("#low" + i).css("color", "red");
							} else if(resobj[j] == "高压") {
								$("#high" + i).css("color", "red");
							} else if(resobj[j] == "血糖") {
								$("#sugar" + i).css("color", "red");
							}
						}

					}
				}).error(function() {
					hui.toast('响应错误!');
				});
			}

			var meuns = ['一键呼救'];
			var cancel = '关闭菜单';
			var _str = '';

			function getstr() {
				return _str;
			}

			function setstr(str) {
				_str = str;
			}

			function check_user() {
				var userid = plus.storage.getItem('userid');
				if(userid == null) return false;
				else return true;
				//return true;
			}

			hui('#yijianhujiu').click(function() {
				if(!check_user()) {
					hui.toast("请先登录！");
					window.open('login.html');
					return;
				}
				//hui.actionSheet(meuns, cancel, function(e) {
				//if(e.index != -1)
				hui.confirm('<div class="checkbox-wrap"><form id="form"> 您若出现以下症状，请点击该症状！<br /><br /> <input id="xiongmen" name="check" type="checkbox" value="0" /><label for="xiongmen">胸闷</label> <input id="huxi" name="check" type="checkbox" value="1" /><label for="huxi">呼吸不畅 </label> <input name="check" type="checkbox" id="shoushang" value="2" /><label for="shoushang">受伤 </label> <input name="check" type="checkbox" id="qichuan" value="3" /><label for="qichuan">气喘 </label> <input id="xinhuang" name="check" type="checkbox" value="4" /><label for="xinhuang">心慌 </label></form></div> ', ['取消', '确定'], function() {
					var userid = {
						User_id: plus.storage.getItem('userid')
					};
					setstr($('#form').serialize());
					console.log("id:" + JSON.stringify(userid));
					var url = "http://120.25.67.15/getUserById";
					$.post(url, userid, function(text) {
						var obj = text;
						if(obj.success == 'true') {
							hui.toast("发送中。。。");
							var address = Array();
							var geolocation = new BMap.Geolocation();
							geolocation.getCurrentPosition(function(r) {
								if(this.getStatus() == BMAP_STATUS_SUCCESS) {
									var gc = new BMap.Geocoder();
									gc.getLocation(r.point, function(rs) {
										var addComp = rs.addressComponents;
										address[0] = addComp.province;
										address[1] = addComp.city;
										address[2] = addComp.district + addComp.street + addComp.streetNumber; //获取地址
										var arry = (getstr()).split('&');
										var strarry = [];
										var arryobj = {};
										for(var i = 0; i < arry.length; i++) {
											switch((arry[i].split('='))[1]) {
												case '0':
													strarry.push("胸闷")
													break;
												case '1':
													strarry.push("呼吸不畅")
													break;
												case '2':
													strarry.push("受伤")
													break;
												case '3':
													strarry.push("气喘")
													break;
												case '4':
													strarry.push("心慌")
													break;
											}
										}
										var disease = '';
										for(var i = 0; i < strarry.length; i++) {
											disease += strarry[i];
										}
										var ph_obj = {};
										var content = address[0]; //省
										var content1 = address[1]; //市
										var content2 = address[2]; //地区
										ph_obj.mobile = obj.User_phone;
										ph_obj.text = "【健康老年APP】您家老人于" + content + "省" + content1 + "市" + content2 + "地区出现紧急情况：" + disease;
										var em_obj = {};
										em_obj.address = obj.User_email;
										em_obj.title = '【健康老年APP】';
										em_obj.content = ph_obj.text;
										console.log("phone:" + JSON.stringify(ph_obj));
										console.log("email:" + JSON.stringify(em_obj));

										var url1 = "http://120.25.67.15/smsFunc";
										$.post(url1, ph_obj, function(text) {
											hui.toast("短信已发送!");
										}).error(function() {
											hui.toast('短信响应错误!');
										});

										var url2 = "http://120.25.67.15/emailFunc";
										$.post(url2, em_obj, function(text) {
											hui.toast("邮件已发送!");
										}).error(function() {
											hui.toast('邮件响应错误!');
										});

										return true;
									});
								} else {
									hui.toast('失败' + this.getStatus());
								}
							});
						} else {
							hui.toast('无该用户!');
							plus.storage.removeItem('userid');
							window.open('login.html');
							return false;
						}
					}).error(function() {
						hui.toast('响应错误!');
						plus.storage.removeItem('userid');
						window.open('login.html');
						return false;
					});
				});
				//});
			});
		</script>
	</body>

</html>